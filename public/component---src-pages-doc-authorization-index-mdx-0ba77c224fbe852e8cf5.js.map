{"version":3,"sources":["webpack:///./src/pages/doc/authorization/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","pageContext","frontmatter","title","parentName","isMDXComponent"],"mappings":"kRAMO,IAAMA,EAAe,GAOtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,iBAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,sBAAKD,EAAME,YAAYC,YAAYC,OACnC,8KACA,mIACA,sBACE,kBAAIC,WAAW,MAAf,qCACA,kBAAIA,WAAW,MAAf,gDAEF,8dACA,wGAAuF,0BAAYA,WAAW,KAAvB,SAAvF,0MACA,uBAAK,kCAAMA,WAAW,OAAU,CAC5B,UAAa,qBADZ,mIAYL,sBACE,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,UAApB,6DACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,cAApB,+EACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,aAApB,kBAA6F,0BAAYA,WAAW,MAAvB,SAA7F,OAAuJ,0BAAYA,WAAW,MAAvB,SAAvJ,SACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,OAApB,2DAAgI,0BAAYA,WAAW,MAAvB,OAAhI,gBAAiM,0BAAYA,WAAW,MAAvB,QAEnM,iDACA,qBAAG,0BAAYA,WAAW,KAAvB,wFACH,sIACA,qBAAG,0BAAYA,WAAW,KAAvB,0IACH,+JACA,oEAAmD,0BAAYA,WAAW,KAAvB,iBAAnD,uDAAoK,0BAAYA,WAAW,KAAvB,2CAApK,iDACA,2LAA0K,0BAAYA,WAAW,KAAvB,mBAA1K,oPACA,wBAKJP,EAAWQ,gBAAiB","file":"component---src-pages-doc-authorization-index-mdx-0ba77c224fbe852e8cf5.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/debabrata/Sites/Projects/Dgraph/graphql-dgraph-web/src/components/layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{props.pageContext.frontmatter.title}</h1>\n    <p>{`Dgraph GraphQL comes with inbuilt authorization.  It allows you to annotate your schema with rules that determine who can access or mutate what data.`}</p>\n    <p>{`Firstly, let's get some concepts defined.  There are two important concepts in what's often called 'auth'.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`authentication : who are you; and`}</li>\n      <li parentName=\"ul\">{`authorization : what are you allowed to do.`}</li>\n    </ul>\n    <p>{`Dgraph GraphQL deals with authorization, but is completely flexible about how your app does authentication.  You could authenticate your users with a cloud service like OneGraph or Auth0, use some social sign in options, or write bespoke code.  The connection between Dgraph and your authentication mechanism is a signed JWT - you tell Dgraph, for example, the public key of the JWT signer and Dgraph trusts JWTs signed by the corresponding private key.`}</p>\n    <p>{`With an authentication mechanism set up, you then annotate your schema with the `}<inlineCode parentName=\"p\">{`@auth`}</inlineCode>{` directive to define your authorization rules, attach details of your authentication provider to the last line of the schema, and pass the schema to Dgraph.  So your schema will follow this pattern.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`type A @auth(...) {\n    ...\n}\n\ntype B @auth(...) {\n    ...\n}\n\n# Dgraph.Authorization HEADER CLAIMS-KEY ALGORITHM KEY\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`HEADER`}</inlineCode>{` is the header in which requests will send the signed JWT`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`CLAIMS-KEY`}</inlineCode>{` is the key inside the JWT that contains the claims relevant to Dgraph auth`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ALGORITHM`}</inlineCode>{` can be either `}<inlineCode parentName=\"li\">{`HS256`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`RS256`}</inlineCode>{`, and`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`KEY`}</inlineCode>{` is the string value of the key (newlines replaced with `}<inlineCode parentName=\"li\">{`\\\\n`}</inlineCode>{`) wrapped in `}<inlineCode parentName=\"li\">{`\"\"`}</inlineCode></li>\n    </ul>\n    <p>{`Valid examples look like`}</p>\n    <p><inlineCode parentName=\"p\">{`# Dgraph.Authorization X-My-App-Auth https://my.app.io/jwt/claims HS256 \"secretkey\"`}</inlineCode></p>\n    <p>{`for HMAC-SHA256 JWT with symmetric cryptography (the signing key and verification key are the same), and like`}</p>\n    <p><inlineCode parentName=\"p\">{`# Dgraph.Authorization X-My-App-Auth https://my.app.io/jwt/claims RS256 \"-----BEGIN PUBLIC KEY-----\\\\n...\\\\n-----END PUBLIC KEY-----\"`}</inlineCode></p>\n    <p>{`for RSA Signature with SHA-256 asymmetric cryptography (the JWT is signed with the private key and Dgraph checks with the public key).`}</p>\n    <p>{`Both cases expect the JWT to be in a header `}<inlineCode parentName=\"p\">{`X-My-App-Auth`}</inlineCode>{` and expect the JWT to contain custom claims object `}<inlineCode parentName=\"p\">{`\"https://my.app.io/jwt/claims\": { ... }`}</inlineCode>{` with the claims used in authorization rules.`}</p>\n    <p>{`Note: authorization is in beta and some aspects may change - for example, it's possible that the method to specify the header, key, etc. will move into the /admin `}<inlineCode parentName=\"p\">{`updateGQLSchema`}</inlineCode>{` mutation that sets the schema.  Some features are also in active improvement and development - for example, auth is supported an on types, but interfaces (and the types that implement them) don't correctly support auth in the current beta.`}</p>\n    <hr></hr>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}