{"version":3,"sources":["webpack:///./src/pages/tutorials/todo-app-tutorial/todo-schema-design.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","pageContext","frontmatter","title","parentName","name","isMDXComponent"],"mappings":"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","file":"component---src-pages-tutorials-todo-app-tutorial-todo-schema-design-mdx-17abc26be9d1e54d2134.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/debabrata/Sites/Projects/Dgraph/graphql-dgraph-web/src/components/layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{props.pageContext.frontmatter.title}</h1>\n    <p>{`Let's start with listing down the entities that are involved in a basic todo app.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Task`}</li>\n      <li parentName=\"ul\">{`User`}</li>\n    </ul>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"581px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"38.036809815950924%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmklEQVQoz41SSw5AEQx0/6uxsLAgroGNT19GUmkEeU1EtZ3pj+q9UymFcs7zQIcNMsY43idMa236VEqJaq0zGAc6bBzAdkn6wig8doEDmU/VoZoXRuGBAO89hRBWZbINSSoTIT7GuPyLEAbnHGmtV/Y/hNZaMsasmU/CPy3LGd5aBukk5GEyCPq+lH3DL4ziapCZv8KNTJLeMB+YR3PEwSRHMQAAAABJRU5ErkJggg==')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"Todo Graph\",\n          \"title\": \"Todo Graph\",\n          \"src\": \"/static/24166bd24b96146583fae024f32863e1/92d15/todo-graph.png\",\n          \"srcSet\": [\"/static/24166bd24b96146583fae024f32863e1/222b7/todo-graph.png 163w\", \"/static/24166bd24b96146583fae024f32863e1/ff46a/todo-graph.png 325w\", \"/static/24166bd24b96146583fae024f32863e1/92d15/todo-graph.png 581w\"],\n          \"sizes\": \"(max-width: 581px) 100vw, 581px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`Equivalent GraphQL schema for the graph above would be as follow:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`type Task {\n    ...\n}\n\ntype User {\n    ...\n}\n`}</code></pre>\n    <p>{`What are the fields that these two simple entities contain?`}</p>\n    <p>{`We have a title and a status to check if it was completed or not in the `}<inlineCode parentName=\"p\">{`Task`}</inlineCode>{` type.\nThen the  `}<inlineCode parentName=\"p\">{`User`}</inlineCode>{` type has a username (unique identifier), name and the tasks.`}</p>\n    <p>{`So each user can have many tasks.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"581px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"38.036809815950924%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQoz3WSyYqFQAxF/f+/EpcuREVBcCEuRRDn2fQ7gRTyujsQq5LUvZn07vuWZVlkmiYZx1Hv+JDneeQtZr8xKPfrujTm4TjP04EI4HuTETeb8z8Mp8eHjGmaSpZlCkCbppFt2zR7nCTSdd0vsmEYtCurep5n8SxrURQSRZF73Latgo/jkHVdlRw1AiQIAvF939mOELFZWAKCEJGALiCGkEQIsbqupaoqxTpCexzHsYRhqE4IaUer+5CUZSl93ys5Jxje5HkuyWccNmMl5ENlEDAnbNS2hnxvnrbNfi/KLQXAvu9uXkZmC/rrt7HE3wX8AAXubY/06RIRAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"Todo Graph complete\",\n          \"title\": \"Todo Graph complete\",\n          \"src\": \"/static/fd7f7ecfa9e5023dda5ce2cad525e5ca/92d15/todo-graph-2.png\",\n          \"srcSet\": [\"/static/fd7f7ecfa9e5023dda5ce2cad525e5ca/222b7/todo-graph-2.png 163w\", \"/static/fd7f7ecfa9e5023dda5ce2cad525e5ca/ff46a/todo-graph-2.png 325w\", \"/static/fd7f7ecfa9e5023dda5ce2cad525e5ca/92d15/todo-graph-2.png 581w\"],\n          \"sizes\": \"(max-width: 581px) 100vw, 581px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span>{`\n*Note - ' `}{`*`}{` ' signifies one-to-many relationship`}</p>\n    <p>{`Now let's add  `}<inlineCode parentName=\"p\">{`@id`}</inlineCode>{` directive to `}<inlineCode parentName=\"p\">{`username `}</inlineCode>{` which makes it the unique key & also add  `}<inlineCode parentName=\"p\">{`@hasInverse`}</inlineCode>{` directive to enable the above relationship between tasks and user.\nWe represent that in the GraphQL schema shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`type Task {\n    id: ID!\n    title: String!\n    completed: Boolean!\n    user: User!\n}\n\ntype User {\n    username: String! @id\n    name: String\n    tasks: [Task] @hasInverse(field: user)\n}\n`}</code></pre>\n    <p>{`Save the content in a file `}<inlineCode parentName=\"p\">{`schema.graphql`}</inlineCode>{`.`}</p>\n    <h3><a name=\"Running\"></a>{`Running`}</h3>\n    <p>{`Before we begin, make sure that you have `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.docker.com/install/\"\n      }}>{`Docker`}</a>{`\ninstalled on your machine.`}</p>\n    <p>{`Let's begin by starting Dgraph standalone by running the command below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`docker run -it -p 8080:8080 dgraph/standalone:master\n`}</code></pre>\n    <p>{`Let's load up the GraphQL schema file to Dgraph:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X POST localhost:8080/admin/schema --data-binary '@schema.graphql'\n`}</code></pre>\n    <p>{`You can access that GraphQL endpoint with any of the great GraphQL developer tools.\nGood choices include GraphQL Playground, Insomnia, GraphiQL and Altair.`}</p>\n    <p>{`Set up any of them and point it at `}<inlineCode parentName=\"p\">{`http://localhost:8080/graphql`}</inlineCode>{`. If you know lots about GraphQL, you might want to explore the schema, queries and mutations that were generated from the schema.`}</p>\n    <h3><a name=\"Mutating\"></a>{`Mutating Data`}</h3>\n    <p>{`Let's add a user and some todos in our Todo App.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`mutation {\n  addUser(input: [\n    {\n      username: \"alice@dgraph.io\",\n      name: \"Alice\",\n      tasks: [\n        {\n          title: \"Avoid touching your face\",\n          completed: false,\n        },\n        {\n          title: \"Stay safe\",\n          completed: false\n        },\n        {\n          title: \"Avoid crowd\",\n          completed: true,\n        },\n        {\n          title: \"Wash your hands often\",\n          completed: true\n        }\n      ]\n    }\n  ]) {\n    user {\n      username\n      name\n      tasks {\n        id\n        title\n      }\n    }\n  }\n}\n`}</code></pre>\n    <h3><a name=\"Querying\"></a>{`Querying Data`}</h3>\n    <p>{`Let's fetch the todos to list in our Todo App:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`query {\n  queryTask {\n    id\n    title\n    completed\n    user {\n        username\n    }\n  }\n}\n`}</code></pre>\n    <p>{`Running the query above should return JSON response as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"queryTask\": [\n      {\n        \"id\": \"0x3\",\n        \"title\": \"Avoid touching your face\",\n        \"completed\": false,\n        \"user\": {\n          \"username\": \"alice@dgraph.io\"\n        }\n      },\n      {\n        \"id\": \"0x4\",\n        \"title\": \"Stay safe\",\n        \"completed\": false,\n        \"user\": {\n          \"username\": \"alice@dgraph.io\"\n        }\n      },\n      {\n        \"id\": \"0x5\",\n        \"title\": \"Avoid crowd\",\n        \"completed\": true,\n        \"user\": {\n          \"username\": \"alice@dgraph.io\"\n        }\n      },\n      {\n        \"id\": \"0x6\",\n        \"title\": \"Wash your hands often\",\n        \"completed\": true,\n        \"user\": {\n          \"username\": \"alice@dgraph.io\"\n        }\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <h3><a name=\"Querying with Filters\"></a>{`Querying Data with Filters`}</h3>\n    <p>{`Before we get into querying data with filters, we will be required\nto define search indexes to the specific fields.`}</p>\n    <p>{`Let's say we have to run a query on the `}<em parentName=\"p\">{`completed`}</em>{` field, for which\nwe add `}<inlineCode parentName=\"p\">{`@search`}</inlineCode>{` directive to the field, as shown in the schema below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`type Task {\n  id: ID!\n  title: String!\n  completed: Boolean! @search\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`@search`}</inlineCode>{` directive is added to support the native search indexes of `}<strong parentName=\"p\">{`Dgraph`}</strong>{`.`}</p>\n    <p>{`Resubmit the updated schema -`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X POST localhost:8080/admin/schema --data-binary '@schema.graphql'\n`}</code></pre>\n    <p>{`Now, let's fetch all todos which are completed :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`query {\n  queryTask(filter: {\n    completed: {\n      eq: \"true\"\n    }\n  }) {\n    id\n    title\n  }\n}\n`}</code></pre>\n    <p>{`Next, let's say we have to run a query on the `}<em parentName=\"p\">{`title`}</em>{` field, for which\nwe add another `}<inlineCode parentName=\"p\">{`@search`}</inlineCode>{` directive to the field, as shown in the schema below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`type Task {\n    id: ID!\n    title: String! @search(by: [fulltext])\n    completed: Boolean! @search\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`fulltext`}</inlineCode>{` search index provides the advanced search capability to perform equality\ncomparison as well as matching with language-specific stemming and stopwords.`}</p>\n    <p>{`Resubmit the updated schema -`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X POST localhost:8080/admin/schema --data-binary '@schema.graphql'\n`}</code></pre>\n    <p>{`Now, let's try to fetch todos whose title has the word `}<em parentName=\"p\">{`\"remember\"`}</em>{` :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`query {\n  queryTask(filter: {\n    title: {\n      alloftext: \"avoid\"\n    }\n  }) {\n    id\n    title\n    completed\n  }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}