(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{RTIA:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return s})),a.d(t,"default",(function(){return l}));a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi"),a("E5k/"),a("q1tI");var n=a("7ljp"),i=a("Bl7J");var s={},o={_frontmatter:s},c=i.a;function l(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,["components"]);return Object(n.b)(c,Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",null,a.pageContext.frontmatter.title),Object(n.b)("p",null,"Let's start by going to our Auth0 dashboard where we can see the application which we have already created and used in our frontend-application."),Object(n.b)("p",null,Object(n.b)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.b)("span",Object.assign({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"65.03067484662577%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABgklEQVQ4y21T2W6DMBDk/78vb30olVJVFQHM4YtrsmPY1oGsNFr5mp09XKBvYb4+0dkAWowR3jmEEODEc02bpgnjOMJ7n87atkVVPdD3vew5/FQdTO9RbOuK6ANC9nAYbXo8zzNWOafRL8uS/LZtf+t/7HeLWRaDtXASmfZRfqO83fBbVSjLEvf7/YWAARUaLLdiEWWhqSktbSR1pkuXmRpBIqpl0GEY052+H+Rsz4oBFcUsRE7Sm4SYG9Mq2LDXUc7issFNM8K84J3lZDuhRG+kwCwujY3oug5WyrCmVLfkF1G8nnAmS4SshTFGUhkSoaaXe945P9QgV4XyiIp0PPJUuEcyqk4BDmiwKEh3X5oih0w3V6FjwpmzQlY3DR51DXOUYhQMUnfrw7UpVMEhnY4u54SO4ySELImiFTAQ4d51mYRUSJ/PVfoxmUI2LoeRN/aY3UtTakmHP0PV6Y/R79cIIbOgZ725x5/Fel4HWzZZl3jMoY4DybS29kid0Cz07hlPsj76QsDV5BMAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object.assign({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Dashboard",title:"Dashboard",src:"/static/b41c7fb9309ec2b00192ea7fe06a2fc4/a6d36/dashboard.png",srcSet:["/static/b41c7fb9309ec2b00192ea7fe06a2fc4/222b7/dashboard.png 163w","/static/b41c7fb9309ec2b00192ea7fe06a2fc4/ff46a/dashboard.png 325w","/static/b41c7fb9309ec2b00192ea7fe06a2fc4/a6d36/dashboard.png 650w","/static/b41c7fb9309ec2b00192ea7fe06a2fc4/e548f/dashboard.png 975w","/static/b41c7fb9309ec2b00192ea7fe06a2fc4/f680b/dashboard.png 1108w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",null,'Now we want to use the JWT that Auth0 generates, but we also need to add custom claims to that token which will be used by our auth rules.\nSo we can use something known as "Rules" (left sidebar on dashboard page) to add custom claims to a token. Let\'s create a new empty rule.'),Object(n.b)("p",null,Object(n.b)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.b)("span",Object.assign({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"69.32515337423312%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACY0lEQVQ4y51TS08TURSevZG9PCSNifZhEVDE0uKDuHdDfAZjDQkRmy5EJahEIgtNNPHXaCJqXPpKJEDiUqEk9DEd2s6087gz089zbkut4sLwJV/OPefe++Xcc85VfC0PLZNBzRZgOI4Dy7Ika7UahBCo1+syXq1WYdu23NM0DaqqQtd1mJaJnFqBUXOg+J4Hy7ToQkOQRfiQcF14ng/f96Ugr10Z81pr0fRdohCN8wpnUCURzoAv5rNZbG6so1goYC9QOH3DMKQYo2y7yJsuCpYLzfFRbKNq/7mWfjO2LeoQfr0hWC6XZYaMH4bAp0wRXzYK+Lyex8efOaxsbWOVuLKlSbuWbfi/Yxq+qwaqLglyLThDFmZsGjYyagmZbAGZXBG5bR2FsoF8SW+Q/VKbL2MVZClmeSRomibUYlGKMnTqpMFNogLv0G5b/8vfiXnUQMUTDhxqCjsSzVruFYqg2umlkpw3xtMXLzGVSuPB/DxmHy9iZn4BdxcWJVOzD5Gae4TbM7OYvnMf02yJqXtzSN5KY3l1DQoPqkHP5HliXLh0DR1dARw6HkeA2DMQIw6jO9KPrnA/2QF0HulD5+Eo2QZ7KL7vQC9evXkLhQe5Uqm0unwlOYmeYBTR+BjCI2OIJM4jPDyK0FAC4ZNEsqGhOIInRlqM0D4LL73/AIWFWHCny5dvTKI31IeB+GmEWTR2FqFTZ0j8HAmOtgnFWowMJ2TGUpDHRn41+jryyRevoqMzgIORQXQH+3YzdGwXe48OYj+V6fXSOyh/d+nJs+cYn0giOZ3G9anUf5HPjk/cxNdvy/gFgqR/88ySSrcAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object.assign({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Rule",title:"Rule",src:"/static/1dc88ccc5e2648c44cd0d018e4d44b5d/a6d36/rule.png",srcSet:["/static/1dc88ccc5e2648c44cd0d018e4d44b5d/222b7/rule.png 163w","/static/1dc88ccc5e2648c44cd0d018e4d44b5d/ff46a/rule.png 325w","/static/1dc88ccc5e2648c44cd0d018e4d44b5d/a6d36/rule.png 650w","/static/1dc88ccc5e2648c44cd0d018e4d44b5d/e548f/rule.png 975w","/static/1dc88ccc5e2648c44cd0d018e4d44b5d/18c13/rule.png 1005w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",null,"Replace the content with the the following -"),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"function (user, context, callback) {\n  const namespace = \"https://dgraph.io/jwt/claims\";\n  context.idToken[namespace] =\n    {\n      'USER': user.email,\n    };\n  \n  return callback(null, user, context);\n}\n")),Object(n.b)("p",null,"In the above function, we are only just adding the custom claim to the token with a field as ",Object(n.b)("inlineCode",{parentName:"p"},"USER")," which if you recall from the last step is used in our auth rules, so it needs to match exactly with that name. "),Object(n.b)("p",null,"Now let's go to ",Object(n.b)("inlineCode",{parentName:"p"},"Settings")," of our Auth0 application and then go down to view the ",Object(n.b)("inlineCode",{parentName:"p"},"Advanced Settings")," to check the JWT signature algorithm (OAuth tab) and then get the certificate (Certificates tab). We will be using ",Object(n.b)("inlineCode",{parentName:"p"},"RS256")," in this example so let's make sure it's set to that and then copy the certificate which we will use to get the public key.  Use the download certificate button there to get the certificate in ",Object(n.b)("inlineCode",{parentName:"p"},"PEM"),". "),Object(n.b)("p",null,Object(n.b)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.b)("span",Object.assign({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"66.25766871165644%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7UlEQVQ4y21T2W7cMAz0//ep6UcVBdoCLfrS3Q2SbvaqD/mSbMnXlENbiyCpgYFkihxxSCqZ/p6Rv5zQhRH8vPfo+17hnEMIAdM8w8tqrVU7bWVZIs9zXUPwKEyN3Dgk8zSpwziuhMMwaJAXcD+JnWfcD0PQdRwHXWNcPKNvEuSnkZuZAT/nOlxuKa5pBiv7RtAKbEf0615Q204V1HV99xsGIRzE2EvqmKdVshDXW0BrHcrW3klatTsljufGGLE7/WemySA182Kg9GVZNikeldYoQ9u2WqvT+YyzIM1SJSmKAqaq0Uv8a/kJm5Bma2CsIW0RnUh9enrGbr/H790OL6cTrrcbLterNMLcm0TfO2FVVXoQCemwFnpt0J/jEYfHR+wPhzshYUTFO0IaKIHB/MI2HhHMkAqYEUm4ZwkyjgwlvyUkEbs1y6zFOdT6bHVqpBSldLIwpUrMaRfw3Iiy7i0hyRgYtrHhjZGQsELo6hKNyRVtmcMUuWZqyv8QkoCymCG7zENewnkMncOt7vDpZ42PPyo8CD58r/ArtZiDvCQZn9cN1LHRLqep1ouEk4zPuL0OjlJhe3y+OHxLA76mHl9uHpkLWCZ5IZtffC2MTZqm0ZGJT4+kBEguy7GU5rQNMElJRq+Y5emtLss7/AMey+oZHQBQzwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object.assign({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Certificate",title:"Certificate",src:"/static/2e318701e47bb104d78bb1d2328e9a69/a6d36/certificate.png",srcSet:["/static/2e318701e47bb104d78bb1d2328e9a69/222b7/certificate.png 163w","/static/2e318701e47bb104d78bb1d2328e9a69/ff46a/certificate.png 325w","/static/2e318701e47bb104d78bb1d2328e9a69/a6d36/certificate.png 650w","/static/2e318701e47bb104d78bb1d2328e9a69/e548f/certificate.png 975w","/static/2e318701e47bb104d78bb1d2328e9a69/6d74e/certificate.png 1085w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",null,"Now let's run a command to get the public key from it, which we will add to our schema. Just change the ",Object(n.b)("inlineCode",{parentName:"p"},"file_name")," and run the command."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{}),"openssl x509 -pubkey -noout -in file_name.pem\n")),Object(n.b)("p",null,"Copy the public key and now let's add it to our schema. For doing that we will add something like this, to the bottom of our schema file - "),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{}),'# Dgraph.Authorization X-Auth0-Token https://dgraph.io/jwt/claims RS256 "<AUTH0-APP-PUBLIC-KEY>"\n')),Object(n.b)("p",null,"Let me just quickly explain what each thing means in that, so firstly we start the line with a ",Object(n.b)("inlineCode",{parentName:"p"},"#  Dgraph.Authorization"),", next is the name of the header ",Object(n.b)("inlineCode",{parentName:"p"},"X-Auth0-Token")," (can be anything) which will be used to send the value of the JWT. Next is the custom-claim name ",Object(n.b)("inlineCode",{parentName:"p"},"https://dgraph.io/jwt/claims")," (again can be anything, just needs to match with the name specified in Auth0). Then next is the ",Object(n.b)("inlineCode",{parentName:"p"},"RS256")," the JWT signature algorithm (another option is ",Object(n.b)("inlineCode",{parentName:"p"},"HS256")," but remember to use the same algorithm in Auth0) and lastly, update ",Object(n.b)("inlineCode",{parentName:"p"},"<AUTH0-APP-PUBLIC-KEY>")," with your public key within the quotes and make sure to have it in a single line and add ",Object(n.b)("inlineCode",{parentName:"p"},"\\n")," where ever needed.  The updated schema will look something like this (update the public key with your key) - "),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-graphql"}),'type Task @auth(\n    query: { rule: """\n        query($USER: String!) {\n            queryTask {\n                user(filter: { username: { eq: $USER } }) {\n                    __typename\n                }\n            }\n        }"""}), {\n    id: ID!\n    title: String! @search(by: [fulltext])\n    completed: Boolean! @search\n    user: User!\n}\ntype User {\n  username: String! @id @search(by: [hash])\n  name: String\n  tasks: [Task] @hasInverse(field: user)\n}\n# Dgraph.Authorization X-Auth0-Token https://dgraph.io/jwt/claims RS256 "<AUTH0-APP-PUBLIC-KEY>"\n')),Object(n.b)("p",null,"Resubmit the updated schema -"),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"curl -X POST localhost:8080/admin/schema --data-binary '@schema.graphql'\n")),Object(n.b)("p",null,"Let's get that token and see what all it contains, then update the frontend accordingly. For doing this, let's start our app again."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"npm start\n")),Object(n.b)("p",null,"Now open a browser window, navigate to ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"http://localhost:3000"}),"http://localhost:3000")," and open the developer tools, go to the ",Object(n.b)("inlineCode",{parentName:"p"},"network")," tab and find a call called ",Object(n.b)("inlineCode",{parentName:"p"},"token")," to get your JWT from its response JSON (field ",Object(n.b)("inlineCode",{parentName:"p"},"id_token"),")."),Object(n.b)("p",null,Object(n.b)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.b)("span",Object.assign({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"41.717791411042946%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABVUlEQVQoz5WSy3KDMAxF+ZYaGvAL2xAg4WEgbSbTTdNk0v//k1vZE7puF2fkq5GvZEFyOvY49AOGYYT3HsuywM8zrHMojcG6ruiHHuM44ng8ou/7GANd16Gqqkhd1zEmjXVQuiQ0tNKYJo+RGqx+xkCX2nofdWjYUxyniRqQHqdouqwnTFQbzNq2Q8K4RJqm4ELhJU+RGwVGF9ns8bouYH4CnxcUXEAqBV2W4JzDWAshRBykLA2KoogvSvbtAZqSxtiYEErCNU1EO4usyCG0QkVnU2o4a6CkhOAFJBlKMpeCQ9E55JL74xvL6Q3nywfez5do7rTEnrCCuu4YKlmgock7q1AbjUoLqhFUQ5QC9TMGkuvXDSPtwLkqPme328UVMMZizLLsV28EvcGebDr5vN5oqUvcQZoy5Hn+a7IR9F9JbvcHfTmP7hB+gwMk7SdMGfiP0cYPnbH5RtGVwaAAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object.assign({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Token",title:"Token",src:"/static/41935d286873ae6f2a3dd8eceef1dc33/a6d36/token.png",srcSet:["/static/41935d286873ae6f2a3dd8eceef1dc33/222b7/token.png 163w","/static/41935d286873ae6f2a3dd8eceef1dc33/ff46a/token.png 325w","/static/41935d286873ae6f2a3dd8eceef1dc33/a6d36/token.png 650w","/static/41935d286873ae6f2a3dd8eceef1dc33/636c2/token.png 911w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",null,"Now go to ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://jwt.io"}),"jwt.io")," and paste your token there."),Object(n.b)("p",null,Object(n.b)("span",Object.assign({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.b)("span",Object.assign({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"51.533742331288344%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABhElEQVQoz2WSjW7bMAyE/f5vt24tuiRomvinWRLHTurYlkTyRpFu0a0GDkdb0Kcj5aKqa7zsdximEVEYDED+U36apsFqtUJ7PiOEgHmewcy2JiKfKhAIOA/A8Qp56yCHDtxcwFpz1YLbm0FjiIiUkIgMRuoZyMTuiwo69uAfW/CvEvJYQdZvkIc95KmG/FQvWwNyIsgwQW5jjvStC1mSFtyPoNcesUmIJSHWqsrrsCOkP+zAOUJ2J++iGyDXO+Si3qu3736QPkV6F8wvwKSaS9UeCNm3+m2jrR7y6QIOCaLt2ayym+hfzwljK5jWunmtvlE95wO8HrUOtV/LeB8x3AewXRy7f9XHDGOnm1cwiIF+53etX70O9ZJQE9AgoBtAV5jz7MOTL79DkW66qdI2K4XsxH3v9bwVxOMC1NOpV5COKGlXdP1+LdbyJ7BZQJoslAtQlU4LMLHNM130W+eSqEq6NrlbwngRG34G5UR5llYvI4iNAymwJoMlM+hZ107uBiQH/gV/dApfxUGYGgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object.assign({parentName:"span"},{className:"gatsby-resp-image-image",alt:"jwt",title:"jwt",src:"/static/1288f9a7fb596f27e60d169942b0f4fc/a6d36/jwt.png",srcSet:["/static/1288f9a7fb596f27e60d169942b0f4fc/222b7/jwt.png 163w","/static/1288f9a7fb596f27e60d169942b0f4fc/ff46a/jwt.png 325w","/static/1288f9a7fb596f27e60d169942b0f4fc/a6d36/jwt.png 650w","/static/1288f9a7fb596f27e60d169942b0f4fc/e548f/jwt.png 975w","/static/1288f9a7fb596f27e60d169942b0f4fc/0f246/jwt.png 1118w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",null,"The token also includes our custom claim like below."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-json"}),'{\n"https://dgraph.io/jwt/claims": {\n    "USER": "vardhanapoorv"\n  },\n  ...\n}\n')),Object(n.b)("p",null,"Now, you can check if the auth rule that we added is working as expected or not. Open the GraphQL tool (Insomnia, GraphQL Playground) add the URL along with the header ",Object(n.b)("inlineCode",{parentName:"p"},"X-Auth0-Token")," and its value as the JWT. Let's try the query to see the todos and only the todos the logged-in user created should be visible."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-graphql"}),"query {\n  queryTask {\n    title\n    completed\n    user {\n        username\n    }\n  }\n}\n")),Object(n.b)("p",null,"The above should give you only your todos and verifies that our auth rule worked!"),Object(n.b)("p",null,"Now let's update our frontend application to include the ",Object(n.b)("inlineCode",{parentName:"p"},"X-Auth0-Token")," header with value as JWT from Auth0 when sending a  request."),Object(n.b)("p",null,"To do this, we need to update the Apollo client setup to include the header while sending the request, and we need to get the JWT from Auth0. "),Object(n.b)("p",null,"The value we want is in the field ",Object(n.b)("inlineCode",{parentName:"p"},"idToken")," from Auth0. We get that by quickly updating ",Object(n.b)("inlineCode",{parentName:"p"},"react-auth0-spa.js")," to get ",Object(n.b)("inlineCode",{parentName:"p"},"idToken")," and pass it as a prop to our ",Object(n.b)("inlineCode",{parentName:"p"},"App"),"."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),'...\n\nconst [popupOpen, setPopupOpen] = useState(false);\nconst [idToken, setIdToken] = useState("");\n\n...\n\nif (isAuthenticated) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n        const idTokenClaims = await auth0FromHook.getIdTokenClaims();\n        setIdToken(idTokenClaims.__raw);\n}\n\n...\n\nconst user = await auth0Client.getUser();\nconst idTokenClaims = await auth0Client.getIdTokenClaims();\n\nsetIdToken(idTokenClaims.__raw);\n\n...\n\n{children}\n      <App idToken={idToken} />\n    </Auth0Context.Provider>\n\n...\n\n')),Object(n.b)("p",null,"Check the updated file ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/dgraph-io/graphql-sample-apps/blob/c94b6eb1cec051238b81482a049100b1cd15bbf7/todo-app-react/src/react-auth0-spa.js"}),"here")),Object(n.b)("p",null," Now let's use that token while creating an Apollo client instance and give it to a header ",Object(n.b)("inlineCode",{parentName:"p"},"X-Auth0-Token")," in our case.  Let's update our ",Object(n.b)("inlineCode",{parentName:"p"},"src/App.js")," file."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),'...\n\nimport { useAuth0 } from "./react-auth0-spa";\nimport { setContext } from "apollo-link-context";\n\n// Updated to take token\nconst createApolloClient = token => {\n  const httpLink = createHttpLink({\n    uri: config.graphqlUrl,\n    options: {\n      reconnect: true,\n    },\n});\n\n// Add header\nconst authLink = setContext((_, { headers }) => {\n    // return the headers to the context so httpLink can read them\n    return {\n      headers: {\n        ...headers,\n        "X-Auth-Token": token,\n      },\n    };\n});\n\n// Include header\nreturn new ApolloClient({\n    link: httpLink,\n    link: authLink.concat(httpLink),\n    cache: new InMemoryCache()\n});\n\n// Get token from props and pass to function\nconst App = ({idToken}) => {\n  const { loading } = useAuth0();\n  if (loading) {\n    return <div>Loading...</div>;\n  }\nconst client = createApolloClient(idToken);\n\n...\n')),Object(n.b)("p",null,"Check the updated file ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/dgraph-io/graphql-sample-apps/blob/c94b6eb1cec051238b81482a049100b1cd15bbf7/todo-app-react/src/App.js"}),"here"),"."),Object(n.b)("p",null,"Refer this step in ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/dgraph-io/graphql-sample-apps/commit/c94b6eb1cec051238b81482a049100b1cd15bbf7"}),"GitHub"),"."),Object(n.b)("p",null,"Let's now start the app."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"npm start\n")),Object(n.b)("p",null,"Now you should have an app running with Auth0!"))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-tutorials-todo-app-tutorial-todo-auth-0-jwt-mdx-80174f6b0eb5a1c93cd8.js.map